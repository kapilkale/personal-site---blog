<!DOCTYPE html>
<html>
  <head>
    <title>Use Jekyll To Keep Your Blog From Folding Under Traffic | Kapil Kale's Blog</title>
    <link href="/stylesheets/application.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-34881072-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>


  <body id="post">
    <div id="all_content">
      <div id="container">
        <div class="social_buttons">
          <div>
            <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.kapilkale.com/blog/use-jekyll-for-massive-blog-traffic/" data-count="vertical" data-text="Use Jekyll To Keep Your Blog From Folding Under Traffic" data-via="kapilvkale">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
          </div>
          <div>
            <iframe src="http://www.facebook.com/plugins/like.php?app_id=420987101301986&amp;href=http://www.kapilkale.com/blog/use-jekyll-for-massive-blog-traffic/&amp;send=false&amp;layout=box_count&amp;width=50&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=40" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:70px; padding-top:2px;" allowTransparency="true"></iframe>
          </div>
        </div>
        <!-- post info -->
        <h2 class="post_title"><a href="/blog/use-jekyll-for-massive-blog-traffic/">Use Jekyll To Keep Your Blog From Folding Under Traffic</a></h2>

        <p class="post_subheader">10/4/2012 by Kapil</p>

        <div class="post_content">
          <p>I&#8217;ve seen a lot of blogs fold under traffic, particularly on Hacker News.</p>

<p>I&#8217;m not sure why this happens, but I&#8217;ve seen it happen under not-that-crazy traffic loads. Anecdotally, a HN story at around #10 will have around 100 concurrent visitors staying for 30 seconds each, so perhaps a three requests per second. I know nothing about server performance, but a setup with a few processes should be able to handle this no problem.</p>

<p>One way to solve this problem is to use third-party blog services. Posterous, Tumblr, and other microblogging-as-a-service packages seem handle the traffic, at the tradeoff of hosting the blog on <a href='http://ycombinator.posterous.com'>their own their domain</a>. This isn&#8217;t great if for blogs who want the associated SEO benefit of inbound links to their own domain. Also not great for companies or people who want lots of customization (e.g. to get readers into a conversion funnel).</p>

<p>Scaling up processes manually on AWS or Heroku works but is slightly annoying since it is hard to predict when traffic will spike. Programmers better than myself can probably write scripts to do this, but this seems inelegant given blog pages are static assets and should be quick to load anyway.</p>

<p><em>The best solution</em> I&#8217;ve found to the problem is to use <a href='http://www.jekyllrb.com'>Jekyll</a>, a static site generator, to create static html files.</p>

<p>This solution has held up to a couple hundred concurrent visitors with a single Heroku process with no perceptible decrease in performance [1], and I&#8217;m pretty sure I&#8217;m not even doing it right. [2]</p>

<p>This blog&#8217;s code is <a href='https://github.com/kapilkale/personal-site---blog'>hosted publicly on Github</a> and demonstrates the simplicity behind Jekyll&#8217;s implementation.</p>

<ul>
<li>There&#8217;s a basic Sinatra app. [3]</li>

<li>There&#8217;s a _config.yml in the repo citing where posts are written in markdown, and where they&#8217;ll be sent to when compiled.</li>

<li>There&#8217;s a layout for posts.</li>

<li>Typing Jekyll into the command line compiles the posts into HTML files.</li>
</ul>

<p>Unfortunately, this leaves users to configure things like RSS feeds, sharing buttons, tags, styling, etc. But I&#8217;d expect some of the people who are trying to run traffic-heavy company or personal blogs might also want to customize such things.</p>

<p>[1]I&#8217;m hosting on the free Heroku plan for which I have one process only. We used a similar configuration for the <a href='http://www.giftrocket.com'>GiftRocket blog</a> and it held up to over a thousand concurrent visitors.</p>

<p>[2] There should be a way to configure the server to render an index.html file for a given public route automatically (e.g. for a request to /blog/use-jekyll-for-massive-blog-traffic render /blog/use-jekyll-for-massive-blog-traffic/index.html). Right now, I&#8217;m having Sinatra <a href='https://github.com/kapilkale/personal-site---blog/blob/master/home.rb'>read the file</a>, which I suspect takes more time than if it were configured lower down the stack. If you know what I should be doing, would love to hear it.</p>

<p>[3] Unnecessary, but I figured I might actually host some small projects here.</p>
        </div>

        <a href="https://twitter.com/kapilvkale" class="twitter-follow-button" data-show-count="false">Follow @kapilvkale</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <div class="footer">
          <a href="/">Home</a>
          <a href="/blog">Blog</a>
        </div>
        <div class="comment_box">
          <fb:comments href="http://www.kapilkale.com/blog/use-jekyll-for-massive-blog-traffic/" num_posts="10" width="400px"></fb:comments>
          <div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
        </div>
      </div>
    </div>
  </body>
</html>
